<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Chapter Content</title>
<link rel="stylesheet" href="style.css">
<script src="api_key.js"></script>
</head>
<body>
<button id="theme-toggle" class="theme-toggle">ğŸŒ™</button>

<div class="container">
  <div class="header-bar">
    <a href="index.html" class="back-button">&lsaquo; Back to Chapters</a>
    <h1 id="chapter-title">Loading...</h1>
  </div>

  <div id="tabs-container" style="display:flex; gap:12px; margin-bottom:12px;">
    <button id="tab-lecture" class="tab-btn">Lectures</button>
    <button id="tab-dpp" class="tab-btn">DPPs</button>
    <button id="tab-notes" class="tab-btn">Notes</button>
  </div>

  <div class="content-viewer">
    <iframe id="content-iframe" frameborder="0"></iframe>
  </div>
</div>

<div class="footer-signature">
  Â© 2025 Meoponly â€” All rights reserved.<br>
  Developed with â¤ï¸ by Meoponly
</div>

<script>
function getQueryParam(param) {
  return new URLSearchParams(window.location.search).get(param);
}

const folderId = getQueryParam('id');
const chapterName = getQueryParam('name');
const lectureId = getQueryParam('lecture');
const dppId = getQueryParam('dpp');
const notesId = getQueryParam('notes');

if (chapterName) {
  document.getElementById('chapter-title').textContent = decodeURIComponent(chapterName);
  document.title = decodeURIComponent(chapterName) + " Content";
}

function loadDrive(id) {
  const iframe = document.getElementById('content-iframe');
  iframe.style.opacity = "0";

  setTimeout(() => {
    iframe.src = 'https://drive.google.com/embeddedfolderview?id=' + id + '#list';
  }, 50);

  iframe.onload = () => {
    iframe.style.opacity = "1";
  };
}

const tabLecture = document.getElementById('tab-lecture');
const tabDpp = document.getElementById('tab-dpp');
const tabNotes = document.getElementById('tab-notes');

if (lectureId) tabLecture.onclick = () => loadDrive(lectureId);
else tabLecture.style.display = 'none';

if (dppId) tabDpp.onclick = () => loadDrive(dppId);
else tabDpp.style.display = 'none';

if (notesId) tabNotes.onclick = () => loadDrive(notesId);
else tabNotes.style.display = 'none';

if (lectureId) loadDrive(lectureId);
else if (dppId) loadDrive(dppId);
else if (notesId) loadDrive(notesId);
else if (folderId) loadDrive(folderId);

const toggleBtn = document.getElementById('theme-toggle');
const body = document.body;

if (localStorage.getItem('theme') === 'dark') {
  body.classList.add('dark-mode');
  toggleBtn.textContent = 'â˜€ï¸';
}

toggleBtn.addEventListener('click', () => {
  body.classList.toggle('dark-mode');
  const isDark = body.classList.contains('dark-mode');
  toggleBtn.textContent = isDark ? 'â˜€ï¸' : 'ğŸŒ™';
  localStorage.setItem('theme', isDark ? 'dark' : 'light');
});
</script>


<script>
let tapCount=0;
const footer=document.querySelector(".footer-signature");
const popup=document.createElement("div");
popup.id="secret-popup";
popup.textContent="Hidden Credit: Built by Viraj ğŸ˜";
document.body.appendChild(popup);

footer.style.userSelect="none";
footer.style.webkitUserSelect="none";

footer.addEventListener("click",()=>{
 tapCount++;
 setTimeout(()=>tapCount=0,600);
 if(tapCount===3){
   popup.style.opacity="1";
   setTimeout(()=>{ popup.style.opacity="0"; },1600);
 }
});
</script>

</body>
</html>
